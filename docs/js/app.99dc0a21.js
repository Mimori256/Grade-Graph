(function(){"use strict";var e={6670:function(e,t,n){var r=n(9242),o=n(3396);const l=(0,o._)("h1",null,"成績表示",-1),u={key:0},a={id:"csvSelect"},i={id:"generateOptions"},c=(0,o._)("div",null,[(0,o._)("p",null,"ファイルを選択してください")],-1),s={key:1},p=(0,o._)("p",null,"戻るためには、ページ下のボタンをクリックしてください",-1);function d(e,t,n,r,d,g){const f=(0,o.up)("FileSelector"),h=(0,o.up)("SelectYear"),m=(0,o.up)("CheckBoxes"),v=(0,o.up)("HelpNote"),_=(0,o.up)("GradeTable"),C=(0,o.up)("GPASection"),w=(0,o.up)("GradeGraph"),b=(0,o.up)("DeleteButton"),k=(0,o.up)("BottomFooter");return(0,o.wg)(),(0,o.iD)(o.HY,null,[l,e.isFileUploaded?((0,o.wg)(),(0,o.iD)("div",s,[p,(0,o.Wm)(_),(0,o.Wm)(C),(0,o.Wm)(w),(0,o.Wm)(b,{onButtonClick:e.deleteFile},null,8,["onButtonClick"])])):((0,o.wg)(),(0,o.iD)("div",u,[(0,o._)("div",a,[(0,o.Wm)(f,{onFileContentChange:e.updateFileContent},null,8,["onFileContentChange"])]),(0,o._)("div",i,[(0,o.Uk)(" 年度を選択 "),(0,o.Wm)(h,{onChangeOption:e.updateYearOption},null,8,["onChangeOption"]),(0,o.Wm)(m,{onChangeOption:e.updateCheckbox},null,8,["onChangeOption"])]),c,(0,o.Wm)(v)])),(0,o.Wm)(k)],64)}var g=n(4870),f=n(65);const h=new f.ZP.Store({state:{courses:[],year:"all"},mutations:{setCourses(e,t){e.courses=t},setYear(e,t){e.year=t}}}),m={for:"fileSelect"};function v(e,t,n,r,l,u){return(0,o.wg)(),(0,o.iD)("div",null,[(0,o._)("label",m,[(0,o.Uk)("ファイルを選択 "),(0,o._)("input",{type:"file",id:"fileSelect",onChange:t[0]||(t[0]=(...t)=>e.handleFileUpload&&e.handleFileUpload(...t)),accept:".csv"},null,32)])])}var _=(0,o.aZ)({props:{fileContent:{type:String}},setup(e,{emit:t}){const n=e=>{const n=e.target.files?.[0];if(n){const e=new FileReader;e.onload=e=>{t("file-content-change",e.target?.result)},e.readAsText(n)}};return{handleFileUpload:n}}}),C=n(89);const w=(0,C.Z)(_,[["render",v]]);var b=w,k=n(7139);const y=(0,o._)("option",{value:"all",selected:""},"全て",-1),G=["value"];function P(e,t,n,l,u,a){return(0,o.wy)(((0,o.wg)(),(0,o.iD)("select",{id:"year","onUpdate:modelValue":t[0]||(t[0]=t=>e.selectedOption=t),onChange:t[1]||(t[1]=t=>e.$emit("change-option",e.selectedOption))},[y,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.lastFourYears,(e=>((0,o.wg)(),(0,o.iD)("option",{key:e,value:e},(0,k.zw)(e),9,G)))),128))],544)),[[r.bM,e.selectedOption]])}var D=(0,o.aZ)({emits:["change-option"],setup(){const e=(new Date).getFullYear(),t=(new Date).getMonth()+1;let n;n=t<4?e-1:e;const r=Array.from({length:4},((e,t)=>n-t)).map((e=>e.toString())),o=(0,g.iH)("all");return{lastFourYears:r,selectedOption:o}}});const O=(0,C.Z)(D,[["render",P]]);var A=O;const Z={for:"teachingCurriculumToGraph"},F={for:"teachingCurriculumToGPA"};function Y(e,t,n,l,u,a){return(0,o.wg)(),(0,o.iD)("div",null,[(0,o._)("label",Z,[(0,o.Uk)(" 教職をグラフに含める "),(0,o.wy)((0,o._)("input",{type:"checkbox",id:"teachingCurriculumToGraph","onUpdate:modelValue":t[0]||(t[0]=t=>e.includeCurriculumToGraph=t),onChange:t[1]||(t[1]=t=>e.$emit("change-option",e.includeCurriculumToGraph,"graph"))},null,544),[[r.e8,e.includeCurriculumToGraph]])]),(0,o._)("label",F,[(0,o.Uk)(" 教職をGPAに含める "),(0,o.wy)((0,o._)("input",{type:"checkbox",id:"teachingCurriculumToGPA","onUpdate:modelValue":t[2]||(t[2]=t=>e.includeCurriculumToGPA=t),onChange:t[3]||(t[3]=t=>e.$emit("change-option",e.includeCurriculumToGraph,"gpa"))},null,544),[[r.e8,e.includeCurriculumToGPA]])])])}var x=(0,o.aZ)({emits:["change-option"],setup(){const e=(0,g.iH)(!1),t=(0,g.iH)(!1);return{includeCurriculumToGraph:e,includeCurriculumToGPA:t}}});const T=(0,C.Z)(x,[["render",Y],["__scopeId","data-v-54e41952"]]);var S=T;const U=(0,o._)("p",null,"修得単位数",-1),H=(0,o._)("p",null,"あなたのGPA",-1);function W(e,t,n,r,l,u){return(0,o.wg)(),(0,o.iD)("div",null,[U,(0,o._)("p",null,(0,k.zw)(e.acquiredUnits)+"/"+(0,k.zw)(e.registeredUnits),1),H,(0,o._)("p",null,(0,k.zw)(e.GPA),1)])}const B={"A+":4.3,A:4,B:3,C:2,D:0},j=e=>Object.keys(B).includes(e.grade),E=(e,t)=>{"all"!==t&&(e=e.filter((e=>e.registrationYear===t)));let n=0,r=0;return e.forEach((e=>{n+=e.units,j(e)&&(r+=e.units)})),[n,r]},M=(e,t)=>{"all"!==t&&(e=e.filter((e=>e.registrationYear===t)));let n=0,r=0;return e.forEach((e=>{j(e)&&(n+=e.units,r+=B[e.grade]*e.units)})),0===n?0:Math.round(r/n*100)/100};var z=(0,o.aZ)({setup(){const e=M(h.state.courses,h.state.year),[t,n]=E(h.state.courses,h.state.year);return{store:h,GPA:e,registeredUnits:t,acquiredUnits:n}}});const $=(0,C.Z)(z,[["render",W]]);var N=$;const V=(0,o._)("h2",null,"成績一覧",-1),q={id:"grade-table"},I=(0,o._)("th",{class:"left"},"科目名",-1),L=(0,o._)("th",null,"単位数",-1),K=(0,o._)("th",null,"成績",-1),Q={key:0},R={class:"left"},J={key:0},X=(0,o._)("div",{id:"unit-sum"},null,-1);function ee(e,t,n,r,l,u){return(0,o.wg)(),(0,o.iD)(o.HY,null,[V,(0,o._)("table",q,[(0,o._)("tr",null,[I,L,K,e.isYearAll(e.year)?((0,o.wg)(),(0,o.iD)("th",Q,"履修年度")):(0,o.kq)("",!0)]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.courses,(t=>((0,o.wg)(),(0,o.iD)("tr",{key:t.grade,class:(0,k.C_)(e.getGradeClassName(t.grade))},[(0,o._)("td",R,(0,k.zw)(t.name),1),(0,o._)("td",null,(0,k.zw)(t.units),1),(0,o._)("td",null,(0,k.zw)(t.grade),1),e.isYearAll(e.year)?((0,o.wg)(),(0,o.iD)("td",J,(0,k.zw)(t.registrationYear),1)):(0,o.kq)("",!0)],2)))),128))]),X],64)}const te=["A+","A","B","C","D","P","F","認","履修中"],ne=e=>{const t=e.sort(((e,t)=>te.indexOf(e.grade)-te.indexOf(t.grade)));return t};var re=ne,oe=(0,o.aZ)({setup(){const e=h.state.year;let t;t="all"===e?h.state.courses:h.state.courses.filter((t=>t.registrationYear===e));const n={"A+":"a-plus",A:"a",B:"b",C:"c",D:"d",P:"p",F:"f","認":"nin","履修中":"ryu"},r=e=>n[e],o=e=>"all"==e;return t=re(t),{courses:t,year:e,getGradeClassName:r,isYearAll:o}}});const le=(0,C.Z)(oe,[["render",ee]]);var ue=le;n(7658);const ae=e=>{let t=e.split("\n");return t.shift(),t.pop(),t=t.map((e=>e.replace(/"/g,""))),t.join("\n")},ie=e=>{const t=ae(e),n=t.split("\n"),r=[];return n.forEach((e=>{const t=e.split(",")[2],n=e.split(",")[3],o=e.split(",")[9],l=e.split(",")[4],u=e.split(",")[7],a={id:t,name:n,registrationYear:o,units:Number(l),grade:u};r.push(a)})),r};var ce=ie;const se={id:"help"},pe=(0,o._)("h1",null,"使い方",-1),de=(0,o._)("p",null," TWINSの成績から、成績のCSVファイルをダウンロードして、そのファイルを選択してください ",-1),ge=(0,o._)("div",{id:"note"},[(0,o._)("h1",null,"注意"),(0,o._)("div",{class:"warnings"},[(0,o._)("p",null,"このページで算出されるGPAは、対象外を考慮していません"),(0,o._)("p",null,"このページは有志の学生によって作成されています。"),(0,o._)("p",null," このツールの使用により生じた不利益等について、開発者は一切の責任を負いません "),(0,o._)("p",null,"使用したCSVファイルが外部に保存されることはありません")])],-1),fe={id:"updte-notice"},he=(0,o._)("p",null,"現在更新を進めているため、一部実装されていない機能があります",-1),me=(0,o._)("p",null,"旧版を使いたい場合は、上のリンクからアクセスしてください",-1);function ve(e,t,n,l,u,a){const i=(0,o.up)("HelpPopup"),c=(0,o.up)("ExternalLink");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",se,[pe,de,(0,o._)("p",{onClick:t[0]||(t[0]=(...t)=>e.togglePopup&&e.togglePopup(...t)),class:"openPopupButton"}," ファイルのダウンロード方法を表示 "),(0,o.wy)((0,o.Wm)(i,{onClosePopup:e.togglePopup},null,8,["onClosePopup"]),[[r.F8,e.isPopupOpen]])]),ge,(0,o._)("div",fe,[(0,o._)("p",null,[(0,o.Wm)(c,{url:"https://github.com/Mimori256/Grade-Graph-Old",content:"旧版のGrade-Graph"}),(0,o.Uk)(" から、Vue.jsを使って作り直しています ")]),he,me])],64)}var _e=n.p+"img/download.feb54526.png",Ce=n.p+"img/confirm.b66d7747.png";const we=e=>((0,o.dD)("data-v-7f7ad4a6"),e=e(),(0,o.Cn)(),e),be={class:"popup-content"},ke=we((()=>(0,o._)("h1",null,"使用方法",-1))),ye=we((()=>(0,o._)("p",null," 成績ページ下部のダウンロードボタンをクリック(表示件数を変更する必要はありません) ",-1))),Ge=we((()=>(0,o._)("img",{src:_e,class:"popup-image",alt:"download"},null,-1))),Pe=we((()=>(0,o._)("p",null," その後表示される、出力をクリック(ファイル形式、文字コードは変更しないでください) ",-1))),De=we((()=>(0,o._)("img",{src:Ce,class:"popup-image",alt:"confirm"},null,-1))),Oe=we((()=>(0,o._)("p",null,"これで成績ファイルをダウンロードすることができます",-1)));function Ae(e,t,n,l,u,a){const i=(0,o.up)("ExternalLink");return(0,o.wg)(),(0,o.iD)("div",{class:"popup",onClick:t[1]||(t[1]=(0,r.iM)((t=>e.$emit("close-popup")),["self"]))},[(0,o._)("div",be,[ke,(0,o._)("p",null,[(0,o.Wm)(i,{url:"https://twins.tsukuba.ac.jp/campusweb/campusportal.do",content:"TWINS"}),(0,o.Uk)("にアクセスして、「成績」タブを選択 ")]),ye,Ge,Pe,De,Oe,(0,o._)("p",null,[(0,o._)("button",{onClick:t[0]||(t[0]=t=>e.$emit("close-popup"))},"閉じる")])])])}const Ze=["href"];function Fe(e,t,n,r,l,u){return(0,o.wg)(),(0,o.iD)("a",{href:e.url,target:"_blank",rel:"noreferrer"},(0,k.zw)(e.content),9,Ze)}var Ye=(0,o.aZ)({props:{url:{type:String,required:!0},content:{type:String,required:!0}}});const xe=(0,C.Z)(Ye,[["render",Fe],["__scopeId","data-v-12c9907e"]]);var Te=xe,Se=(0,o.aZ)({components:{ExternalLink:Te}});const Ue=(0,C.Z)(Se,[["render",Ae],["__scopeId","data-v-7f7ad4a6"]]);var He=Ue,We=(0,o.aZ)({components:{ExternalLink:Te,HelpPopup:He},setup(){const e=(0,g.iH)(!1),t=()=>{e.value=!e.value};return{isPopupOpen:e,togglePopup:t}}});const Be=(0,C.Z)(We,[["render",ve]]);var je=Be;function Ee(e,t,n,r,l,u){return(0,o.wg)(),(0,o.iD)("button",{class:"close-button",onClick:t[0]||(t[0]=t=>e.$emit("button-click"))},"戻る")}var Me=(0,o.aZ)({emits:["button-click"],setup(){return{}}});const ze=(0,C.Z)(Me,[["render",Ee]]);var $e=ze;function Ne(e,t,n,r,l,u){const a=(0,o.up)("GChart");return(0,o.wg)(),(0,o.j4)(a,{type:"PieChart",data:e.data,options:e.options},null,8,["data","options"])}var Ve=n(739);const qe=["A+","A","B","C","D","P","F","認","履修中"],Ie=["#ff9999","#ffcc99","#99ccff","#ffff99","#99ff99","#ffccd8","#e599ff","#ffddcc","#cccccc"],Le=(e,t)=>{const n=[0,0,0,0,0,0,0,0,0];return e.forEach((e=>{"all"!==t&&e.registrationYear!==t||(n[qe.indexOf(e.grade)]+=e.units)})),n},Ke=(e,t)=>{const n=Le(e,t),r=n.reduce(((e,t)=>e+t),0),o=n.map((e=>Math.round(e/r*100)));return o},Qe=(e,t)=>{const n=Le(e,t),r=Ke(e,t),o=[["Grade","Units"]];for(let l=0;l<n.length;l++)o.push([`${qe[l]}: ${r[l]}%`,n[l]]);return o};var Re=(0,o.aZ)({components:{GChart:Ve.PQ},setup(){const e=h.state.courses,t=h.state.year,n=Qe(e,t),r={colors:Ie,backgroundColor:"#eeeeee",pieSliceText:"none",chartArea:{width:"100%",height:"80%"},legend:{position:"bottom"}};return{data:n,options:r}}});const Je=(0,C.Z)(Re,[["render",Ne]]);var Xe=Je;const et=e=>((0,o.dD)("data-v-1bf061ac"),e=e(),(0,o.Cn)(),e),tt=et((()=>(0,o._)("hr",null,null,-1)));function nt(e,t,n,r,l,u){const a=(0,o.up)("ExternalLink");return(0,o.wg)(),(0,o.iD)("footer",null,[tt,(0,o._)("p",null,[(0,o.Uk)(" Source code is availabe on "),(0,o.Wm)(a,{url:"https://github.com/Mimori256/Grade-Graph",content:"GitHub"})]),(0,o._)("p",null,[(0,o.Uk)(" Contributed by: "),(0,o.Wm)(a,{url:"https://github.com/Mimori256",content:"Mimori256"})])])}var rt=(0,o.aZ)({components:{ExternalLink:Te}});const ot=(0,C.Z)(rt,[["render",nt],["__scopeId","data-v-1bf061ac"]]);var lt=ot,ut=(0,o.aZ)({name:"App",components:{FileSelector:b,SelectYear:A,CheckBoxes:S,GPASection:N,GradeTable:ue,HelpNote:je,DeleteButton:$e,GradeGraph:Xe,BottomFooter:lt},setup(){const e=(0,g.iH)(null),t=(0,g.iH)("all"),n=(0,g.iH)(!1),r=(0,g.iH)(!0),o=(0,g.iH)(!0),l=t=>{n.value=!0,e.value=t;const r=ce(t);console.log(r),h.commit("setCourses",r)},u=e=>{t.value=e,h.commit("setYear",e)},a=(e,t)=>{"graph"===t?r.value=e:"gpa"===t&&(o.value=e)},i=()=>{n.value=!1,e.value=null,h.commit("setCourses",[]),h.commit("setYear","all")};return{selected:t,includeCurriculumToGraph:r,includeCurriculumToGPA:o,updateYearOption:u,updateCheckbox:a,isFileUploaded:n,fileContent:e,deleteFile:i,parseCSV:ce,updateFileContent:l,store:h}}});const at=(0,C.Z)(ut,[["render",d]]);var it=at;(0,r.ri)(it).mount("#app")}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var l=t[r]={exports:{}};return e[r].call(l.exports,l,l.exports,n),l.exports}n.m=e,function(){var e=[];n.O=function(t,r,o,l){if(!r){var u=1/0;for(s=0;s<e.length;s++){r=e[s][0],o=e[s][1],l=e[s][2];for(var a=!0,i=0;i<r.length;i++)(!1&l||u>=l)&&Object.keys(n.O).every((function(e){return n.O[e](r[i])}))?r.splice(i--,1):(a=!1,l<u&&(u=l));if(a){e.splice(s--,1);var c=o();void 0!==c&&(t=c)}}return t}l=l||0;for(var s=e.length;s>0&&e[s-1][2]>l;s--)e[s]=e[s-1];e[s]=[r,o,l]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.p=""}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,r){var o,l,u=r[0],a=r[1],i=r[2],c=0;if(u.some((function(t){return 0!==e[t]}))){for(o in a)n.o(a,o)&&(n.m[o]=a[o]);if(i)var s=i(n)}for(t&&t(r);c<u.length;c++)l=u[c],n.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return n.O(s)},r=self["webpackChunkgrade_graph"]=self["webpackChunkgrade_graph"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=n.O(void 0,[998],(function(){return n(6670)}));r=n.O(r)})();
//# sourceMappingURL=app.99dc0a21.js.map